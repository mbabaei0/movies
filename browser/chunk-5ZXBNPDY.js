import{b as M}from"./chunk-X3LNOBFT.js";import{G as $,X as y,_ as n,a as u,b as g,d as r,e as a,ea as h,f as d,g as v,hb as f}from"./chunk-XR5O2AHZ.js";var I=(()=>{var t;let e=class e{constructor(){a(this,t,h(M))}fetchMovies(s){return r(this,t).get("",{params:g(u({},s),{s:s.term})})}fetchMovie(s){return r(this,t).get("",{params:{i:s}})}};t=new WeakMap,e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var w=(()=>{var t;let e=class e{constructor(){a(this,t);d(this,t,{$movies:f(void 0),$errMessage:f(null),$totalPages:f(0),$loading:f(!1)}),this.$movies=r(this,t).$movies.asReadonly(),this.$errMessage=r(this,t).$errMessage.asReadonly(),this.$totalPages=r(this,t).$totalPages.asReadonly(),this.$loading=r(this,t).$loading.asReadonly()}setMovies(s){r(this,t).$movies.set(s)}setErr(s){r(this,t).$errMessage.set(s)}setTotalPages(s){r(this,t).$totalPages.set(s)}setSetLoading(s){r(this,t).$loading.set(s)}};t=new WeakMap,e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function P(){return new Date().getTime()}var j=(()=>{let t=class t{constructor(){this.worker=new Worker(new URL("worker-WOPCDNBP.js",import.meta.url),{type:"module"})}groupBy(c,s){return new Promise((l,m)=>{this.worker.postMessage({items:c,key:s,id:P()}),this.worker.onmessage=i=>{l(i.data.response)}})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var q=(()=>{var t,e,c;let s=class s{constructor(){a(this,t,h(I));a(this,e,h(w));a(this,c,h(j))}get $movies(){return r(this,e).$movies}get $err(){return r(this,e).$errMessage}get $totalPages(){return r(this,e).$totalPages}fetachMovies(m){return r(this,t).fetchMovies(m).pipe($(200),y(i=>v(this,null,function*(){if(i.Error)r(this,e).setErr(i.Error),r(this,e).setMovies(null);else if(i.Search){let b=yield r(this,c).groupBy(i.Search,"Year");r(this,e).setMovies(b),r(this,e).setErr(""),r(this,e).setTotalPages(Math.ceil(+i.totalResults/10))}})))}resetStore(){r(this,e).setErr(""),r(this,e).setMovies(null),r(this,e).setTotalPages(0)}getMovie(m){return r(this,t).fetchMovie(m)}};t=new WeakMap,e=new WeakMap,c=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();export{q as a};
